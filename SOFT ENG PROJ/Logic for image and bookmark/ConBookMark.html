<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Image Changer Bookmark Page</title>
  <style>
    .bookmark-container {
      max-width: 600px;
      margin: 20px auto;
    }

    #bookmarks-list {
      list-style: none;
      padding: 0;
    }

    .bookmark-item {
      margin-bottom: 10px;
      cursor: pointer;
      border: 1px solid #ccc;
      padding: 5px;
    }

    .delete-button {
      margin-left: 5px;
      cursor: pointer;
    }
  </style>
</head>
<body>

  <div class="bookmark-container">
    <h1>Image Changer Bookmark Page</h1>

    <form id="bookmarkForm">
      <label for="initialLocation">Initial Location:</label>
      <select id="initialLocationBookmark">
        <option value=" "> </option>
        <option value="lobby">Lobby</option>
        <option value="canteen">Canteen</option>
        <option value="library">Library</option>
      </select>

      <label for="desiredLocation">Desired Location:</label>
      <select id="desiredLocationBookmark">
        <option value=" "> </option>
        <option value="lobby">Lobby</option>
        <option value="canteen">Canteen</option>
        <option value="library">Library</option>
      </select>

      <button type="button" onclick="saveBookmark()">+</button>
    </form>

    <ul id="bookmarks-list" onclick="loadBookmark(event)"></ul>

    <button onclick="addMoreLocations()">Back to MainPage</button>
  </div>

  <script>
    function populateBookmarkForm(initialLocation, desiredLocation) {
      document.getElementById('initialLocationBookmark').value = initialLocation;
      document.getElementById('desiredLocationBookmark').value = desiredLocation;
    }

    window.addEventListener('load', loadBookmarks);

    function saveBookmark() {
      var initialLocation = document.getElementById('initialLocationBookmark').value;
      var desiredLocation = document.getElementById('desiredLocationBookmark').value;

      if (initialLocation.trim() === '' || desiredLocation.trim() === '') {
        alert('Please select both initial and desired locations.');
        return;
      }

      var bookmarkItem = document.createElement('li');
      bookmarkItem.classList.add('bookmark-item');
      bookmarkItem.textContent = `${initialLocation} to ${desiredLocation}`;

      bookmarkItem.setAttribute('data-initial', initialLocation);
      bookmarkItem.setAttribute('data-desired', desiredLocation);

      var deleteButton = document.createElement('button');
      deleteButton.classList.add('delete-button');
      deleteButton.textContent = 'X';
      deleteButton.onclick = function() {
        bookmarkItem.remove();
        saveBookmarks();
      };

      bookmarkItem.appendChild(deleteButton);

      bookmarkItem.onclick = function() {
        populateBookmarkForm(initialLocation, desiredLocation);
        window.location.href = 'connection of testing3 withbookmark.html?initial=' + initialLocation + '&desired=' + desiredLocation;
      };

      document.getElementById('bookmarks-list').appendChild(bookmarkItem);

      saveBookmarks();

      document.getElementById('initialLocationBookmark').value = '';
      document.getElementById('desiredLocationBookmark').value = '';
    }

    function saveBookmarks() {
      var bookmarks = document.querySelectorAll('.bookmark-item');
      var bookmarksData = [];

      bookmarks.forEach(function(bookmark) {
        bookmarksData.push({
          initial: bookmark.getAttribute('data-initial'),
          desired: bookmark.getAttribute('data-desired'),
        });
      });

      localStorage.setItem('bookmarks', JSON.stringify(bookmarksData));
    }

    function loadBookmarks() {
      var bookmarksData = localStorage.getItem('bookmarks');

      if (bookmarksData) {
        bookmarksData = JSON.parse(bookmarksData);

        bookmarksData.forEach(function(bookmarkData) {
          var bookmarkItem = document.createElement('li');
          bookmarkItem.classList.add('bookmark-item');
          bookmarkItem.textContent = `${bookmarkData.initial} to ${bookmarkData.desired}`;

          bookmarkItem.setAttribute('data-initial', bookmarkData.initial);
          bookmarkItem.setAttribute('data-desired', bookmarkData.desired);

          var deleteButton = document.createElement('button');
          deleteButton.classList.add('delete-button');
          deleteButton.textContent = 'X';
          deleteButton.onclick = function() {
            bookmarkItem.remove();
            saveBookmarks(); // Save updated bookmarks to localStorage
          };

          bookmarkItem.appendChild(deleteButton);
          document.getElementById('bookmarks-list').appendChild(bookmarkItem);
        });
      }
    }

    function loadBookmark(event) {
      if (event.target.classList.contains('bookmark-item') || event.target.classList.contains('delete-button')) {
        if (!event.target.classList.contains('delete-button')) {
          var initialLocation = event.target.getAttribute('data-initial');
          var desiredLocation = event.target.getAttribute('data-desired');

          window.location.href = `Main Page.html?initial=${initialLocation}&desired=${desiredLocation}`;
        }
      }
    }

    function addMoreLocations() {
      window.location.href = 'Main Page.html';
    }
  </script>

</body>
</html>